version: "v1.0"
spec: "CE_30"
statement: "30 regras para engenharia de contexto eficiente (2k-12k tokens) com governança BASELINE."

categorias:
  preparacao:
    range: "CE01..CE10"
    rules:
      - "CE01: objetivo em 1 frase + critério de pronto"
      - "CE02: selecionar Studio correto"
      - "CE03: selecionar Skills necessárias"
      - "CE04: carregar apenas SSOT relevante"
      - "CE05: fixar restrições e proibições"
      - "CE06: fixar orçamento e teto CPSJ"
      - "CE07: solo travado quando solicitado"
      - "CE08: fixar idioma e glossário"
      - "CE09: fixar formato de saída + schema"
      - "CE10: fixar evidências obrigatórias"

  montagem:
    range: "CE11..CE20"
    rules:
      - "CE11: contexto vem em PAC 2k-12k"
      - "CE12: preferir refs SSOT a texto inline gigante"
      - "CE13: separar fatos/decisões/preferências/tarefas"
      - "CE14: declarar assumido vs confirmado"
      - "CE15: definir entradas e saídas"
      - "CE16: exemplos pequenos (golden snippets)"
      - "CE17: critérios de validação (gates)"
      - "CE18: idempotency + retry policy"
      - "CE19: mapa de ações permitido (ActionPack subset)"
      - "CE20: fallback + rollback"

  execucao:
    range: "CE21..CE30"
    rules:
      - "CE21: etapas curtas, fechando pack por etapa"
      - "CE22: diff sempre em estado persistente"
      - "CE23: logs mínimos e sanitizados"
      - "CE24: Doctor1 antes de Doctor2"
      - "CE25: TestSprite nos fluxos críticos"
      - "CE26: medir custo real e waste rate"
      - "CE27: replay com idempotency_key"
      - "CE28: publicar evidência GNDrive"
      - "CE29: promover memória para LTA quando relevante"
      - "CE30: carimbar PASS/FAIL com refs"
