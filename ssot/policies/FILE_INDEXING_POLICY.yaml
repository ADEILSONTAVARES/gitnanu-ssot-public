version: "v1.0"
policy: FILE_INDEXING_POLICY
goal: "Permitir consulta cruzada sem DB precoce"

jsonl_partitioning:
  strategy: "by_day"
  path: "evidence/_index/{company_id}/{YYYY}/{MM}/{DD}.jsonl"

materialized_views_as_files:
  enabled: true
  outputs:
    - name: "evidence_summary_daily"
      path: "evidence/_views/{company_id}/{YYYY}-{MM}-{DD}_summary.json"
    - name: "cost_summary_daily"
      path: "evidence/_views/{company_id}/{YYYY}-{MM}-{DD}_cost.json"

when_to_promote_to_db:
  - "jsonl_over_10gb_per_tenant"
  - "queries_require_joins_over_multiple_dimensions"
