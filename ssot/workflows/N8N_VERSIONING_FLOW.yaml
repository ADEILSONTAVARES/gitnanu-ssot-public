version: "v1.0"
workflow: N8N_VERSIONING_FLOW
goal: "Toda mudanca em workflow n8n vira commit via GitNanu"

mechanism:
  trigger: "n8n_workflow_saved"
  action:
    - "export_workflow_json"
    - "sanitize_export"
    - "write_to_repo_path:ssot/workflows/n8n_exports/{workflow_id}.json"
    - "gitnanu_commit:chore(n8n): export workflow {workflow_id}"

requirements:
  - "GitNanu is the only writer"
  - "Doctor1 must pass before commit"
